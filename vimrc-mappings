
" ------------------- Key mappings
"
let mapleader = ","
let maplocalleader = ","

command Time :echom system("date '+\%H:\%M' | tr -d '\n'")
nnoremap <leader>t :Time<CR>

" , used to have this 'backwards to character' functionality. Use '\' for this instead.
nnoremap \ ,

" navigate buffers with ease
" note: this requires system-level config, mapping cmd-hjkl to
" cmd-<arrow-keys>)
nnoremap <S-C-right> :bn<CR>
nnoremap <S-C-left> :bp<CR>
if has('nvim')
    tnoremap <S-C-right> <C-\><C-n>:bn<CR>
    tnoremap <S-C-left> <C-\><C-n>:bp<CR>
    tnoremap <ESC> <C-\><C-n>
endif

autocmd BufWinEnter,WinEnter term://* startinsert
autocmd BufLeave term://* stopinsert

" create split windows intuitively
nnoremap <C-right> :set splitright<CR>:vnew<CR>
nnoremap <C-left> :set nosplitright<CR>:vnew<CR>
nnoremap <C-up> :set nosplitbelow<CR>:new<CR>
nnoremap <C-down> :set splitbelow<CR>:new<CR>

" Smart way to move beteen windows
nnoremap <C-j> <C-W>j
nnoremap <C-k> <C-W>k
nnoremap <C-h> <C-W>h
nnoremap <C-l> <C-W>l
if has('nvim')
    tnoremap <C-j> <C-\><C-n><C-W>j
    tnoremap <C-k> <C-\><C-n><C-W>k
    tnoremap <C-h> <C-\><C-n><C-W>h
    tnoremap <C-l> <C-\><C-n><C-W>l
endif


" reload chrome from within vim
" nnoremap <leader>r :!/usr/local/bin/chromereload.sh<cr><cr>
nmap ? <Plug>DashSearch
nnoremap <leader>r :Require!<cr><cr>

nnoremap <leader>f :Files<CR>
nnoremap <leader>b :Unite buffer<CR>
nnoremap tt :NERDTreeTabsToggle<CR>

nnoremap <leader>g :GitGutterToggle<CR>

nnoremap n nzz
nnoremap N Nzz


" visual Block mode
nnoremap <leader>v v<C-v>

" better :bd (buffer delete)
nnoremap <leader>q :Bdelete<cr>

" Fast editing of the .vimrc
nnoremap <leader>e :e! ~/.vim/vimrc<cr>

" Fast editing of Snippets
nnoremap <leader>ue :UltiSnipsEdit<CR>

" jump to function definition in javascript
nnoremap <leader>, /<C-r><C-w>.*function/<CR>zt3<C-Y>
nnoremap <leader>s :%s/\v

" search and replace
nnoremap <leader>s :%s/

" move blocks of text in visual mode
vnoremap <up> xkP`[V`]
vnoremap <down> xp`[V`]

" leader-d to remove a selection -- somehow reminds me of cmd-d in Photoshop
noremap <leader>d :nohlsearch<CR>
noremap <leader>h <ctrl-w>

" make A and I work in visual mode as they do in visual block mode
vnoremap <C-q> <esc>'<<C-q>'>$

" always use 'very magic' regexes
nnoremap / /\v

" fix indentation after splice
nnoremap <leader>o <leader>o==

nnoremap <leader>l :set list!<CR>

" run in node
nnoremap <leader>n :!node %<CR>

" --------------------- From Drews vimrc:
" Visual line repeat
xnoremap . :normal .<CR>
xnoremap @ :<C-u>call ExecuteMacroOverVisualRange()<CR>

vnoremap <leader><space> :call Preserve("'<,'>s/\\s\\+$//e")<CR>
nnoremap <leader><space> :call Preserve("%s/\\s\\+$//e")<CR>
nnoremap <leader>u :call Preserve("Gread -")<CR>

" check todo item
nnoremap <leader>x :call ToggleDone()<CR>

